{"version":3,"sources":["main.js"],"names":["Site","init","_this","this","Utilities","Header","Search","Support","RadioPlayer","bind","fixWidows","$","length","bindResourcesToggle","click","selectText","$resources","toggle","each","string","html","replace","$menuToggle","$headerSub","$searchToggle","$headerSearch","$searchInput","hasClass","showSinglePostTitle","focus","headerHeight","height","$headerSinglePostTitle","window","scroll","scrollTop","css","form","tags","tagsList","fourzerofour","on","debounce","term","slugify","val","$suggested","siblings","hide","show","text","toString","toLowerCase","href","location","request","split","pop","target","closest","find","value","$radioPlayer","playerIsInitialized","isBST","checkBST","isSchedule","goLive","setInterval","goOffline","initPlayer","$jPlayer","jPlayer","ready","title","mp3","cssSelectorAncestor","swfPath","supplied","useStateClassSkin","autoBlur","smoothPlayBar","keyEnabled","event","play","pause","now","utc","Date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","day","getDay","hours","getHours","minutes","getMinutes","dayminutes","lSoM","lSoO","d","i","tmp","getFullYear","k","tmpk"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, Site */\n\nSite = {\n  init: function() {\n    var _this = this;\n\n    _this.Utilities.init();\n    _this.Header.init();\n    _this.Search.init();\n    _this.Support.init();\n    _this.RadioPlayer.init();\n\n  }\n};\n\nSite.Utilities = {\n  init: function() {\n    var _this = this;\n\n    _this.bind();\n    _this.fixWidows();\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    if ($('#single-resources-section').length) {\n      _this.bindResourcesToggle();\n    }\n\n    $('.js-select').click(function() {\n      $(this).selectText();\n    });\n\n  },\n\n  bindResourcesToggle: function() {\n    var $resources = $('#single-resources-section');\n\n    $('#js-resources-toggle').click(function() {\n      $resources.toggle();\n    });\n\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n};\n\nSite.Header = {\n  init: function() {\n    var _this = this;\n\n    _this.$menuToggle = $('#menu-toggle');\n    _this.$headerSub = $('#header-sub');\n    _this.$searchToggle = $('#search-toggle');\n    _this.$headerSearch = $('#header-search');\n    _this.$searchInput = $('#search-input');\n\n    _this.bind();\n\n    if ($('body').hasClass('single')) {\n      _this.showSinglePostTitle();\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.$menuToggle.click(function() {\n      _this.$headerSub.toggle();\n    });\n\n    _this.$searchToggle.click(function() {\n      _this.$headerSearch.toggle();\n       _this.$searchInput.focus();\n    });\n\n  },\n\n  showSinglePostTitle: function() {\n    var _this = this;\n\n    _this.headerHeight = $('#header-main-wrapper').height();\n    _this.$headerSinglePostTitle = $('#header-page-title');\n\n    $(window).scroll(function() {\n\n      if ($(window).scrollTop() > _this.headerHeight) {\n\n        _this.$headerSinglePostTitle.css('opacity', 1);\n\n      } else {\n\n        _this.$headerSinglePostTitle.css('opacity', 0);\n\n      }\n\n    });\n\n  }\n};\n\nSite.Search = {\n  init: function() {\n    var _this = this;\n\n    _this.form = $('#search-input');\n    _this.tags = $('.suggested-tag');\n    _this.tagsList = $('#tag-suggestions');\n\n    _this.bind();\n\n     if ($('body').hasClass('error404')) {\n      _this.fourzerofour();\n    }\n\n  },\n\n  bind: function() {\n    var _this = this;\n\n    _this.form.on('change keyup input paste', $.debounce( 500, function() {\n\n      // Get Input Value\n      var term = _this.slugify($(this).val());\n\n      // Get matching tags\n      var $suggested = _this.tags.siblings('[data-tag*=\"' + term + '\"]');\n\n      // Hide all tags\n      _this.tags.hide();\n\n      // If matching tags, show them\n      if( $suggested.length !== 0 ) {\n        $suggested.show();\n        _this.tagsList.show();\n      } else {\n        _this.tagsList.hide();\n      }\n    }));\n  },\n\n  slugify: function(text) {\n    return text.toString().toLowerCase()\n      .replace(/\\s+/g, '-')           // Replace spaces with -\n      .replace(/[^\\w\\-]+/g, '')       // Remove all non-word chars\n      .replace(/\\-\\-+/g, '-')         // Replace multiple - with single -\n      .replace(/^-+/, '')             // Trim - from start of text\n      .replace(/-+$/, '');  \n  },\n\n  fourzerofour: function() {\n    var href = window.location.href;\n    // remove url before WP\n    var request = href.split('/');\n    // get last part of url\n\n    // If trailing /\n    if( request[request.length - 1] === \"\" ) {\n      // Remove last element from the array\n      request.pop();\n    }\n\n    request = request[request.length-1];\n    // remove any dashes [in the case of a real permalink slug]\n    request = request.replace(/-/g, ' ');\n\n    if (request) {\n      $('#search-input').val(request).focus();\n    }\n  },\n};\n\nSite.Support = {\n  init: function() {\n    if ($('.support-section').length) {\n      this.bind();\n    }\n  },\n\n  bind: function() {\n    $('.support-form-slider').on('input', function() {\n      var target = $(this).closest('.support-form').find('.support-form-value');\n      target.html(this.value);\n    });\n  },\n};\n\nSite.RadioPlayer = {\n  $radioPlayer: $('#radio-player'),\n  playerIsInitialized: false,\n\n  init: function() {\n    var _this = this;\n\n    // saves boolean for British Summer Time or not\n    _this.isBST = _this.checkBST();\n\n    if ($('body').hasClass('home')) {\n\n      // checks if radio show is live in the schedule\n      if (_this.isSchedule()) {\n        _this.goLive();\n      }\n\n      setInterval((function() {\n        if (_this.isSchedule()) {\n          _this.goLive();\n        } else {\n          _this.goOffline();\n        }\n      }), 15000);\n\n    }\n\n  },\n\n  goLive: function() {\n    var _this = this;\n\n    if (!_this.playerIsInitialized) {\n      _this.initPlayer();\n    }\n\n    _this.$radioPlayer.show();\n  },\n\n  goOffline: function() {\n    var _this = this;\n\n    if (_this.playerIsInitialized) {\n      _this.$jPlayer.jPlayer('stop');\n    }\n\n    _this.$radioPlayer.hide();\n  },\n\n  initPlayer: function() {\n    var _this = this;\n\n    _this.$jPlayer = $('#jplayer').jPlayer({\n      ready: function () {\n        $(this).jPlayer('setMedia', {\n          title: 'resonancefm',\n          mp3: 'http://54.77.136.103:8000/resonance',\n        });\n      },\n      cssSelectorAncestor: '#jp_container_1',\n      swfPath: '/js',\n      supplied: 'mp3',\n      useStateClassSkin: true,\n      autoBlur: false,\n      smoothPlayBar: true,\n      keyEnabled: true,\n    }).bind($.jPlayer.event.play, function() {\n      $('.jp-play').hide();\n      $('.jp-stop').show();\n    }).bind($.jPlayer.event.pause, function() {\n      $('.jp-stop').hide();\n      $('.jp-play').show();\n    });\n\n    _this.playerIsInitialized = true;\n  },\n\n  isSchedule: function() {\n    var _this = this;\n\n    var utc = new Date();\n    var now;\n\n    if (_this.isBST) {\n      now = new Date(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate(), (utc.getUTCHours() + 1), utc.getUTCMinutes(), utc.getUTCSeconds());\n    } else {\n      now = new Date(utc.getUTCFullYear(), utc.getUTCMonth(), utc.getUTCDate(), utc.getUTCHours(), utc.getUTCMinutes(), utc.getUTCSeconds());\n    }\n\n    var day = now.getDay();\n    var hours = now.getHours();\n    var minutes = now.getMinutes();\n    var dayminutes = (hours * 60) + minutes;\n\n    // checking if time is Monday between 7am and 8am with a little in and out flexibility\n    // if not  checking if time is Friday between 1pm and 2pm with a little in and out flexibility\n    if (day === 1 && dayminutes > 418 && dayminutes < 482) {\n      return true;\n    } else if (day === 5 && dayminutes > 778 && dayminutes < 842) {\n      return true;\n    }\n\n    return false;\n\n  },\n\n  checkBST: function() {\n    var d = new Date();\n    var lSoM;\n    var lSoO;\n\n    // code from forgotton source. it checking against a pattern if date is in summer time or not\n    for (var i = 31; i > 0; i--) {\n      var tmp = new Date(d.getFullYear(), 2, i);\n      if (tmp.getDay() === 0) {\n        lSoM = tmp;\n        break;\n      }\n    }\n\n    for (var k = 31; k > 0; k--) {\n      var tmpk = new Date(d.getFullYear(), 9, k);\n      if (tmpk.getDay() === 0) {\n        lSoO = tmpk;\n        break;\n      }\n    }\n\n    if (d < lSoM || d > lSoO) {\n      return false;\n    }\n\n    return true;\n  },\n\n};\n\nSite.init();\n"],"sourceRoot":"/source/"}