Site={init:function(){var e=this;e.Utilities.init(),e.Header.init(),e.Search.init(),e.Support.init(),e.Analytics.init(),$(document).ready(function(){e.Gallery.init()})}},Site.Utilities={init:function(){var e=this;e.bind(),e.fixWidows(),e.displayTimeSince(),e.checkGDPRApproval()},bind:function(){var e=this;$("#single-resources-section").length&&e.bindResourcesToggle(),$(".js-select").click(function(){$(this).selectText()})},bindResourcesToggle:function(){var e=$("#single-resources-section");$("#js-resources-toggle").click(function(){e.toggle()})},fixWidows:function(){$(".js-fix-widows").each(function(){var e=$(this).html();e=e.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(e)})},displayTimeSince:function(){$(".js-time-since").each(function(){var e=$(this),t=e.data("timestamp"),i=moment(t);i.isAfter(moment().subtract(5,"hours"))&&e.text("| "+i.fromNow())})},checkGDPRApproval:function(){var e=Cookies.get("gdpr-approval");"true"!==e&&($("#gdpr").show(),$("#gdpr-accept").click(function(){Cookies.set("gdpr-approval",!0),$("#gdpr").hide()}))}},Site.Header={init:function(){var e=this;e.$menuToggle=$("#menu-toggle"),e.$headerSub=$("#header-sub"),e.$searchToggle=$("#search-toggle"),e.$headerSearch=$("#header-search"),e.$searchInput=$("#search-input"),e.bind(),$("body").hasClass("single")&&e.showSinglePostTitle()},bind:function(){var e=this;e.$menuToggle.click(function(){e.$headerSub.toggle()}),e.$searchToggle.click(function(){e.$headerSearch.toggle(),e.$searchInput.focus()})},showSinglePostTitle:function(){var e=this;e.headerHeight=$("#header-main-wrapper").height(),e.$headerSinglePostTitle=$("#header-page-title"),e.setSinglePostTitleWidth(),$(window).scroll(function(){$(window).scrollTop()>e.headerHeight?e.$headerSinglePostTitle.css("opacity",1):e.$headerSinglePostTitle.css("opacity",0)}),$(window).resize(function(){e.setSinglePostTitleWidth()})},setSinglePostTitleWidth:function(){var e=this;totalWidth=$(".col18").innerWidth(),navsWidth=$("#header-navs").innerWidth(),e.$headerSinglePostTitle.css("max-width",totalWidth-navsWidth-10+"px")}},Site.Gallery={galleryInstances:[],init:function(){var e=this;$(".swiper-container").length&&e.initSwiperInstances()},initSwiperInstances:function(){var e=this;$(".swiper-container").each(function(t,i){e.galleryInstances[t]=new Swiper(i,{loop:!0,pagination:"#gallery-pagination",paginationType:"fraction",paginationFractionRender:function(e,t,i){return'<span class="'+t+'"></span>/<span class="'+i+'"></span>'},onTap:function(e,t){e.slideNext()}})})}},Site.Search={init:function(){var e=this;$("body").hasClass("error404")&&e.fourzerofour()},fourzerofour:function(){var e=window.location.href,t=e.split("/");""===t[t.length-1]&&t.pop(),t=t[t.length-1],t=t.replace(/-/g," "),t&&$("#search-input").val(t).focus()}},Site.Support={init:function(){var e=this;$(".support-section").length&&e.bind(),e.$progressBar=$("#progress-bar"),e.$progressBar.length&&e.initProgressBar()},bind:function(){$(".support-form-slider").on("input",function(){var e=$(this).closest(".support-form").find(".support-form-value");e.html(this.value)})},initProgressBar:function(){var e=this;e.$progressBar.css("width","0%"),$.get("https://payment.novaramedia.com/api/goal",null,function(t,i){if("success"===i){var n=t.percent;n>1&&(n=1),$("#progress-bar-row").slideDown(1250,function(){e.$progressBar.css("width",100*n+"%"),e.displayProgressText(t)})}},"json")},displayProgressText:function(e){var t=this,i=e.total/e.percent,n=": £"+t.numberWithCommas(e.total)+" of £"+t.numberWithCommas(Math.round(i));$("#progress-text").text(n)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},Site.Analytics={init:function(){var e=this;dataLayer&&e.bind()},bind:function(){var e=this;$(".support-form-slider").on("input",e.debounce(function(){dataLayer.push({event:"sliderChanged",target:$(this).data("target"),amount:this.value})},250)),Site.Header.$menuToggle.click(function(){dataLayer.push({event:"headerToggled"})}),$(".related-posts .post").click(function(){dataLayer.push({event:"relatedPostClicked"})})},debounce:function(e,t,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||e.apply(s,r)},a=i&&!n;clearTimeout(n),n=setTimeout(o,t),a&&e.apply(s,r)}}},Site.init();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiU2l0ZSIsImluaXQiLCJfdGhpcyIsInRoaXMiLCJVdGlsaXRpZXMiLCJIZWFkZXIiLCJTZWFyY2giLCJTdXBwb3J0IiwiQW5hbHl0aWNzIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJHYWxsZXJ5IiwiYmluZCIsImZpeFdpZG93cyIsImRpc3BsYXlUaW1lU2luY2UiLCJjaGVja0dEUFJBcHByb3ZhbCIsImxlbmd0aCIsImJpbmRSZXNvdXJjZXNUb2dnbGUiLCJjbGljayIsInNlbGVjdFRleHQiLCIkcmVzb3VyY2VzIiwidG9nZ2xlIiwiZWFjaCIsInN0cmluZyIsImh0bWwiLCJyZXBsYWNlIiwiJGVsZW1lbnQiLCJ0aW1lc3RhbXAiLCJkYXRhIiwibSIsIm1vbWVudCIsImlzQWZ0ZXIiLCJzdWJ0cmFjdCIsInRleHQiLCJmcm9tTm93IiwiYXBwcm92YWxDb29raWUiLCJDb29raWVzIiwiZ2V0Iiwic2hvdyIsInNldCIsImhpZGUiLCIkbWVudVRvZ2dsZSIsIiRoZWFkZXJTdWIiLCIkc2VhcmNoVG9nZ2xlIiwiJGhlYWRlclNlYXJjaCIsIiRzZWFyY2hJbnB1dCIsImhhc0NsYXNzIiwic2hvd1NpbmdsZVBvc3RUaXRsZSIsImZvY3VzIiwiaGVhZGVySGVpZ2h0IiwiaGVpZ2h0IiwiJGhlYWRlclNpbmdsZVBvc3RUaXRsZSIsInNldFNpbmdsZVBvc3RUaXRsZVdpZHRoIiwid2luZG93Iiwic2Nyb2xsIiwic2Nyb2xsVG9wIiwiY3NzIiwicmVzaXplIiwidG90YWxXaWR0aCIsImlubmVyV2lkdGgiLCJuYXZzV2lkdGgiLCJnYWxsZXJ5SW5zdGFuY2VzIiwiaW5pdFN3aXBlckluc3RhbmNlcyIsImluZGV4IiwiaXRlbSIsIlN3aXBlciIsImxvb3AiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvblR5cGUiLCJwYWdpbmF0aW9uRnJhY3Rpb25SZW5kZXIiLCJzd2lwZXIiLCJjdXJyZW50Q2xhc3NOYW1lIiwidG90YWxDbGFzc05hbWUiLCJvblRhcCIsImV2ZW50Iiwic2xpZGVOZXh0IiwiZm91cnplcm9mb3VyIiwiaHJlZiIsImxvY2F0aW9uIiwicmVxdWVzdCIsInNwbGl0IiwicG9wIiwidmFsIiwiJHByb2dyZXNzQmFyIiwiaW5pdFByb2dyZXNzQmFyIiwib24iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZmluZCIsInZhbHVlIiwidGV4dFN0YXR1cyIsInBlcmNlbnQiLCJzbGlkZURvd24iLCJkaXNwbGF5UHJvZ3Jlc3NUZXh0IiwidG90YWwiLCJudW1iZXJXaXRoQ29tbWFzIiwiTWF0aCIsInJvdW5kIiwieCIsInRvU3RyaW5nIiwiZGF0YUxheWVyIiwiZGVib3VuY2UiLCJwdXNoIiwiYW1vdW50IiwiZnVuYyIsIndhaXQiLCJpbW1lZGlhdGUiLCJ0aW1lb3V0IiwiY29udGV4dCIsImFyZ3MiLCJhcmd1bWVudHMiLCJsYXRlciIsImFwcGx5IiwiY2FsbE5vdyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiJBQUdBQSxNQUNFQyxLQUFNLFdBQ0osR0FBSUMsR0FBUUMsSUFFWkQsR0FBTUUsVUFBVUgsT0FDaEJDLEVBQU1HLE9BQU9KLE9BQ2JDLEVBQU1JLE9BQU9MLE9BQ2JDLEVBQU1LLFFBQVFOLE9BQ2RDLEVBQU1NLFVBQVVQLE9BRWhCUSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2hCVCxFQUFNVSxRQUFRWCxXQUtwQkQsS0FBS0ksV0FDSEgsS0FBTSxXQUNKLEdBQUlDLEdBQVFDLElBRVpELEdBQU1XLE9BQ05YLEVBQU1ZLFlBQ05aLEVBQU1hLG1CQUNOYixFQUFNYyxxQkFHUkgsS0FBTSxXQUNKLEdBQUlYLEdBQVFDLElBRVJNLEdBQUUsNkJBQTZCUSxRQUNqQ2YsRUFBTWdCLHNCQUdSVCxFQUFFLGNBQWNVLE1BQU0sV0FDcEJWLEVBQUVOLE1BQU1pQixnQkFLWkYsb0JBQXFCLFdBQ25CLEdBQUlHLEdBQWFaLEVBQUUsNEJBRW5CQSxHQUFFLHdCQUF3QlUsTUFBTSxXQUM5QkUsRUFBV0MsWUFLZlIsVUFB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QU1XLFFBSVZBLEtBQU0sV0FDSixHQUFJWCxHQUFRQyxJQUVaTSxHQUFFLHdCQUF3QjZFLEdBQUcsUUFBU3BGLEVBQU1vRyxTQUFTLFdBQ25ERCxVQUFVRSxNQUNSNUIsTUFBUyxnQkFDVFksT0FBVTlFLEVBQUVOLE1BQU0wQixLQUFLLFVBQ3ZCMkUsT0FBVXJHLEtBQUt1RixTQUVoQixNQUVIMUYsS0FBS0ssT0FBT3FDLFlBQVl2QixNQUFNLFdBQzVCa0YsVUFBVUUsTUFDUjVCLE1BQVMsb0JBSWJsRSxFQUFFLHdCQUF3QlUsTUFBTSxXQUM5QmtGLFVBQVVFLE1BQ1I1QixNQUFTLDBCQU1mMkIsU0FBVSxTQUFTRyxFQUFNQyxFQUFNQyxHQUM3QixHQUFJQyxFQUNKLE9BQU8sWUFDTCxHQUFJQyxHQUFVMUcsS0FBTTJHLEVBQU9DLFVBQ3ZCQyxFQUFRLFdBQ1ZKLEVBQVUsS0FDTEQsR0FBV0YsRUFBS1EsTUFBTUosRUFBU0MsSUFFbENJLEVBQVVQLElBQWNDLENBQzVCTyxjQUFhUCxHQUNiQSxFQUFVUSxXQUFXSixFQUFPTixHQUN4QlEsR0FBU1QsRUFBS1EsTUFBTUosRUFBU0MsTUFLdkM5RyxLQUFLQyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGpzaGludCBicm93c2VyOiB0cnVlLCBkZXZlbDogdHJ1ZSwgaW5kZW50OiAyLCBjdXJseTogdHJ1ZSwgZXFlcWVxOiB0cnVlLCBmdXR1cmVob3N0aWxlOiB0cnVlLCBsYXRlZGVmOiB0cnVlLCB1bmRlZjogdHJ1ZSwgdW51c2VkOiB0cnVlICovXG4vKiBnbG9iYWwgJCwgU2l0ZSwgQ29va2llcywgZGF0YUxheWVyLCBTd2lwZXIsIG1vbWVudCAqL1xuXG5TaXRlID0ge1xuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuVXRpbGl0aWVzLmluaXQoKTtcbiAgICBfdGhpcy5IZWFkZXIuaW5pdCgpO1xuICAgIF90aGlzLlNlYXJjaC5pbml0KCk7XG4gICAgX3RoaXMuU3VwcG9ydC5pbml0KCk7XG4gICAgX3RoaXMuQW5hbHl0aWNzLmluaXQoKTtcblxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgX3RoaXMuR2FsbGVyeS5pbml0KCk7XG4gICAgfSk7XG4gIH1cbn07XG5cblNpdGUuVXRpbGl0aWVzID0ge1xuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuYmluZCgpO1xuICAgIF90aGlzLmZpeFdpZG93cygpO1xuICAgIF90aGlzLmRpc3BsYXlUaW1lU2luY2UoKTtcbiAgICBfdGhpcy5jaGVja0dEUFJBcHByb3ZhbCgpO1xuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoJCgnI3NpbmdsZS1yZXNvdXJjZXMtc2VjdGlvbicpLmxlbmd0aCkge1xuICAgICAgX3RoaXMuYmluZFJlc291cmNlc1RvZ2dsZSgpO1xuICAgIH1cblxuICAgICQoJy5qcy1zZWxlY3QnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICQodGhpcykuc2VsZWN0VGV4dCgpO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgYmluZFJlc291cmNlc1RvZ2dsZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyICRyZXNvdXJjZXMgPSAkKCcjc2luZ2xlLXJlc291cmNlcy1zZWN0aW9uJyk7XG5cbiAgICAkKCcjanMtcmVzb3VyY2VzLXRvZ2dsZScpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgJHJlc291cmNlcy50b2dnbGUoKTtcbiAgICB9KTtcblxuICB9LFxuXG4gIGZpeFdpZG93czogZnVuY3Rpb24oKSB7XG4gICAgLy8gdXRpbGl0eSBjbGFzcyBtYWlubHkgZm9yIHVzZSBvbiBoZWFkaW5lcyB0byBhdm9pZCB3aWRvd3MgW3NpbmdsZSB3b3JkcyBvbiBhIG5ldyBsaW5lXVxuICAgICQoJy5qcy1maXgtd2lkb3dzJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgdmFyIHN0cmluZyA9ICQodGhpcykuaHRtbCgpO1xuICAgICAgc3RyaW5nID0gc3RyaW5nLnJlcGxhY2UoLyAoW14gXSopJC8sJyZuYnNwOyQxJyk7XG4gICAgICAkKHRoaXMpLmh0bWwoc3RyaW5nKTtcbiAgICB9KTtcbiAgfSxcblxuICBkaXNwbGF5VGltZVNpbmNlOiBmdW5jdGlvbigpIHtcbiAgICAkKCcuanMtdGltZS1zaW5jZScpLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgJGVsZW1lbnQgPSAkKHRoaXMpO1xuICAgICAgdmFyIHRpbWVzdGFtcCA9ICRlbGVtZW50LmRhdGEoJ3RpbWVzdGFtcCcpO1xuICAgICAgdmFyIG0gPSBtb21lbnQodGltZXN0YW1wKTtcblxuICAgICAgaWYgKG0uaXNBZnRlcihtb21lbnQoKS5zdWJ0cmFjdCg1LCAnaG91cnMnKSkpIHtcbiAgICAgICAgJGVsZW1lbnQudGV4dCgnfCAnICsgbS5mcm9tTm93KCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuXG4gIGNoZWNrR0RQUkFwcHJvdmFsOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXBwcm92YWxDb29raWUgPSBDb29raWVzLmdldCgnZ2Rwci1hcHByb3ZhbCcpO1xuXG4gICAgaWYgKGFwcHJvdmFsQ29va2llICE9PSAndHJ1ZScpIHtcbiAgICAgICQoJyNnZHByJykuc2hvdygpO1xuXG4gICAgICAkKCcjZ2Rwci1hY2NlcHQnKS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgICAgQ29va2llcy5zZXQoJ2dkcHItYXBwcm92YWwnLCB0cnVlKTtcbiAgICAgICAgJCgnI2dkcHInKS5oaWRlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxufTtcblxuU2l0ZS5IZWFkZXIgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfdGhpcy4kbWVudVRvZ2dsZSA9ICQoJyNtZW51LXRvZ2dsZScpO1xuICAgIF90aGlzLiRoZWFkZXJTdWIgPSAkKCcjaGVhZGVyLXN1YicpO1xuICAgIF90aGlzLiRzZWFyY2hUb2dnbGUgPSAkKCcjc2VhcmNoLXRvZ2dsZScpO1xuICAgIF90aGlzLiRoZWFkZXJTZWFyY2ggPSAkKCcjaGVhZGVyLXNlYXJjaCcpO1xuICAgIF90aGlzLiRzZWFyY2hJbnB1dCA9ICQoJyNzZWFyY2gtaW5wdXQnKTtcblxuICAgIF90aGlzLmJpbmQoKTtcblxuICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ3NpbmdsZScpKSB7XG4gICAgICBfdGhpcy5zaG93U2luZ2xlUG9zdFRpdGxlKCk7XG4gICAgfVxuXG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLiRtZW51VG9nZ2xlLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgX3RoaXMuJGhlYWRlclN1Yi50b2dnbGUoKTtcbiAgICB9KTtcblxuICAgIF90aGlzLiRzZWFyY2hUb2dnbGUuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy4kaGVhZGVyU2VhcmNoLnRvZ2dsZSgpO1xuICAgICAgIF90aGlzLiRzZWFyY2hJbnB1dC5mb2N1cygpO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgc2hvd1NpbmdsZVBvc3RUaXRsZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLmhlYWRlckhlaWdodCA9ICQoJyNoZWFkZXItbWFpbi13cmFwcGVyJykuaGVpZ2h0KCk7XG4gICAgX3RoaXMuJGhlYWRlclNpbmdsZVBvc3RUaXRsZSA9ICQoJyNoZWFkZXItcGFnZS10aXRsZScpO1xuXG4gICAgX3RoaXMuc2V0U2luZ2xlUG9zdFRpdGxlV2lkdGgoKTtcblxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoJCh3aW5kb3cpLnNjcm9sbFRvcCgpID4gX3RoaXMuaGVhZGVySGVpZ2h0KSB7XG5cbiAgICAgICAgX3RoaXMuJGhlYWRlclNpbmdsZVBvc3RUaXRsZS5jc3MoJ29wYWNpdHknLCAxKTtcblxuICAgICAgfSBlbHNlIHtcblxuICAgICAgICBfdGhpcy4kaGVhZGVyU2luZ2xlUG9zdFRpdGxlLmNzcygnb3BhY2l0eScsIDApO1xuXG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKCkge1xuICAgICAgX3RoaXMuc2V0U2luZ2xlUG9zdFRpdGxlV2lkdGgoKTtcbiAgICB9KTtcblxuICB9LFxuXG4gIHNldFNpbmdsZVBvc3RUaXRsZVdpZHRoOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdG90YWxXaWR0aCA9ICQoJy5jb2wxOCcpLmlubmVyV2lkdGgoKTtcbiAgICBuYXZzV2lkdGggPSAkKCcjaGVhZGVyLW5hdnMnKS5pbm5lcldpZHRoKCk7XG5cbiAgICBfdGhpcy4kaGVhZGVyU2luZ2xlUG9zdFRpdGxlLmNzcygnbWF4LXdpZHRoJywgKHRvdGFsV2lkdGggLSBuYXZzV2lkdGggLSAxMCkgKyAncHgnKTtcbiAgfVxufTtcblxuU2l0ZS5HYWxsZXJ5ID0ge1xuICBnYWxsZXJ5SW5zdGFuY2VzOiBbXSxcblxuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKCQoJy5zd2lwZXItY29udGFpbmVyJykubGVuZ3RoKSB7XG4gICAgICBfdGhpcy5pbml0U3dpcGVySW5zdGFuY2VzKCk7XG4gICAgfVxuICB9LFxuXG4gIGluaXRTd2lwZXJJbnN0YW5jZXM6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAkKCcuc3dpcGVyLWNvbnRhaW5lcicpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGl0ZW0pIHtcblxuICAgICAgX3RoaXMuZ2FsbGVyeUluc3RhbmNlc1tpbmRleF0gPSBuZXcgU3dpcGVyKGl0ZW0sIHtcbiAgICAgICAgbG9vcDogdHJ1ZSxcbiAgICAgICAgcGFnaW5hdGlvbjogJyNnYWxsZXJ5LXBhZ2luYXRpb24nLFxuICAgICAgICBwYWdpbmF0aW9uVHlwZTogJ2ZyYWN0aW9uJyxcbiAgICAgICAgcGFnaW5hdGlvbkZyYWN0aW9uUmVuZGVyOiBmdW5jdGlvbiAoc3dpcGVyLCBjdXJyZW50Q2xhc3NOYW1lLCB0b3RhbENsYXNzTmFtZSkge1xuICAgICAgICAgIHJldHVybiAnPHNwYW4gY2xhc3M9XCInICsgY3VycmVudENsYXNzTmFtZSArICdcIj48L3NwYW4+LzxzcGFuIGNsYXNzPVwiJyArIHRvdGFsQ2xhc3NOYW1lICsgJ1wiPjwvc3Bhbj4nO1xuICAgICAgICB9LFxuICAgICAgICBvblRhcDogZnVuY3Rpb24oc3dpcGVyLCBldmVudCkge1xuICAgICAgICAgIHN3aXBlci5zbGlkZU5leHQoKTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5TaXRlLlNlYXJjaCA9IHtcbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdlcnJvcjQwNCcpKSB7XG4gICAgICBfdGhpcy5mb3VyemVyb2ZvdXIoKTtcbiAgICB9XG5cbiAgfSxcblxuICBmb3VyemVyb2ZvdXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgLy8gcmVtb3ZlIHVybCBiZWZvcmUgV1BcbiAgICB2YXIgcmVxdWVzdCA9IGhyZWYuc3BsaXQoJy8nKTtcbiAgICAvLyBnZXQgbGFzdCBwYXJ0IG9mIHVybFxuXG4gICAgLy8gSWYgdHJhaWxpbmcgL1xuICAgIGlmKCByZXF1ZXN0W3JlcXVlc3QubGVuZ3RoIC0gMV0gPT09IFwiXCIgKSB7XG4gICAgICAvLyBSZW1vdmUgbGFzdCBlbGVtZW50IGZyb20gdGhlIGFycmF5XG4gICAgICByZXF1ZXN0LnBvcCgpO1xuICAgIH1cblxuICAgIHJlcXVlc3QgPSByZXF1ZXN0W3JlcXVlc3QubGVuZ3RoLTFdO1xuICAgIC8vIHJlbW92ZSBhbnkgZGFzaGVzIFtpbiB0aGUgY2FzZSBvZiBhIHJlYWwgcGVybWFsaW5rIHNsdWddXG4gICAgcmVxdWVzdCA9IHJlcXVlc3QucmVwbGFjZSgvLS9nLCAnICcpO1xuXG4gICAgaWYgKHJlcXVlc3QpIHtcbiAgICAgICQoJyNzZWFyY2gtaW5wdXQnKS52YWwocmVxdWVzdCkuZm9jdXMoKTtcbiAgICB9XG4gIH0sXG59O1xuXG5TaXRlLlN1cHBvcnQgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoJCgnLnN1cHBvcnQtc2VjdGlvbicpLmxlbmd0aCkge1xuICAgICAgX3RoaXMuYmluZCgpO1xuICAgIH1cblxuICAgIF90aGlzLiRwcm9ncmVzc0JhciA9ICQoJyNwcm9ncmVzcy1iYXInKTtcblxuICAgIGlmIChfdGhpcy4kcHJvZ3Jlc3NCYXIubGVuZ3RoKSB7XG4gICAgICBfdGhpcy5pbml0UHJvZ3Jlc3NCYXIoKTtcbiAgICB9XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24oKSB7XG4gICAgJCgnLnN1cHBvcnQtZm9ybS1zbGlkZXInKS5vbignaW5wdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0YXJnZXQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5zdXBwb3J0LWZvcm0nKS5maW5kKCcuc3VwcG9ydC1mb3JtLXZhbHVlJyk7XG4gICAgICB0YXJnZXQuaHRtbCh0aGlzLnZhbHVlKTtcbiAgICB9KTtcbiAgfSxcblxuICBpbml0UHJvZ3Jlc3NCYXI6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfdGhpcy4kcHJvZ3Jlc3NCYXIuY3NzKCd3aWR0aCcsICcwJScpO1xuXG4gICAgJC5nZXQoJ2h0dHBzOi8vcGF5bWVudC5ub3ZhcmFtZWRpYS5jb20vYXBpL2dvYWwnLCBudWxsLCBmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzKSB7XG5cbiAgICAgIGlmICh0ZXh0U3RhdHVzID09PSAnc3VjY2VzcycpIHtcbiAgICAgICAgdmFyIHBlcmNlbnQgPSBkYXRhLnBlcmNlbnQ7XG5cbiAgICAgICAgaWYgKHBlcmNlbnQgPiAxKSB7XG4gICAgICAgICAgcGVyY2VudCA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICAkKCcjcHJvZ3Jlc3MtYmFyLXJvdycpLnNsaWRlRG93bigxMjUwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfdGhpcy4kcHJvZ3Jlc3NCYXIuY3NzKCd3aWR0aCcsIChwZXJjZW50ICogMTAwKSArICclJyk7XG5cbiAgICAgICAgICBfdGhpcy5kaXNwbGF5UHJvZ3Jlc3NUZXh0KGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgIH0sICdqc29uJyk7XG4gIH0sXG5cbiAgZGlzcGxheVByb2dyZXNzVGV4dDogZnVuY3Rpb24oZGF0YSkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgdG90YWwgPSBkYXRhLnRvdGFsIC8gZGF0YS5wZXJjZW50O1xuICAgIHZhciB0ZXh0ID0gJzogwqMnICsgX3RoaXMubnVtYmVyV2l0aENvbW1hcyhkYXRhLnRvdGFsKSArICcgb2YgwqMnICsgX3RoaXMubnVtYmVyV2l0aENvbW1hcyhNYXRoLnJvdW5kKHRvdGFsKSk7XG5cbiAgICAkKCcjcHJvZ3Jlc3MtdGV4dCcpLnRleHQodGV4dCk7XG4gIH0sXG5cbiAgbnVtYmVyV2l0aENvbW1hczogZnVuY3Rpb24oeCkge1xuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI5MDExMDIvaG93LXRvLXByaW50LWEtbnVtYmVyLXdpdGgtY29tbWFzLWFzLXRob3VzYW5kcy1zZXBhcmF0b3JzLWluLWphdmFzY3JpcHQjMjkwMTI5OFxuICAgIHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpO1xuICB9LFxufTtcblxuU2l0ZS5BbmFseXRpY3MgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoZGF0YUxheWVyKSB7XG4gICAgICBfdGhpcy5iaW5kKCk7XG4gICAgfVxuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAkKCcuc3VwcG9ydC1mb3JtLXNsaWRlcicpLm9uKCdpbnB1dCcsIF90aGlzLmRlYm91bmNlKGZ1bmN0aW9uKCkge1xuICAgICAgZGF0YUxheWVyLnB1c2goe1xuICAgICAgICAnZXZlbnQnOiAnc2xpZGVyQ2hhbmdlZCcsXG4gICAgICAgICd0YXJnZXQnOiAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpLFxuICAgICAgICAnYW1vdW50JzogdGhpcy52YWx1ZSxcbiAgICAgIH0pO1xuICAgIH0sIDI1MCkpO1xuXG4gICAgU2l0ZS5IZWFkZXIuJG1lbnVUb2dnbGUuY2xpY2soZnVuY3Rpb24oKSB7IC8vIGJpbmQgaGFtYnVyZ2VyIGNsaWNrXG4gICAgICBkYXRhTGF5ZXIucHVzaCh7XG4gICAgICAgICdldmVudCc6ICdoZWFkZXJUb2dnbGVkJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKCcucmVsYXRlZC1wb3N0cyAucG9zdCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgZGF0YUxheWVyLnB1c2goe1xuICAgICAgICAnZXZlbnQnOiAncmVsYXRlZFBvc3RDbGlja2VkJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgfSxcblxuICBkZWJvdW5jZTogZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgdmFyIHRpbWVvdXQ7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICBpZiAoIWltbWVkaWF0ZSkgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIH07XG4gICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH07XG4gIH0sXG59O1xuXG5TaXRlLmluaXQoKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=