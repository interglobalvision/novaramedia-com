Site={init:function(){var e=this;e.Utilities.init(),e.Header.init(),e.Search.init(),e.Support.init(),$(document).ready(function(){e.Gallery.init()})}},Site.Utilities={init:function(){var e=this;e.bind(),e.fixWidows(),e.displayTimeSince(),e.checkGDPRApproval()},bind:function(){var e=this;$("#single-resources-section").length&&e.bindResourcesToggle(),$(".js-select").click(function(){$(this).selectText()})},bindResourcesToggle:function(){var e=$("#single-resources-section");$("#js-resources-toggle").click(function(){e.toggle()})},fixWidows:function(){$(".js-fix-widows").each(function(){var e=$(this).html();e=e.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(e)})},displayTimeSince:function(){$(".js-time-since").each(function(){var e=$(this),i=e.data("timestamp"),t=moment(i);t.isAfter(moment().subtract(5,"hours"))&&e.text("| "+t.fromNow())})},checkGDPRApproval:function(){var e=Cookies.get("gdpr-approval");"true"!==e&&($("#gdpr").show(),$("#gdpr-accept").click(function(){Cookies.set("gdpr-approval",!0),$("#gdpr").hide()}))}},Site.Header={init:function(){var e=this;e.$menuToggle=$("#menu-toggle"),e.$headerSub=$("#header-sub"),e.$searchToggle=$("#search-toggle"),e.$headerSearch=$("#header-search"),e.$searchInput=$("#search-input"),e.bind(),$("body").hasClass("single")&&e.showSinglePostTitle()},bind:function(){var e=this;e.$menuToggle.click(function(){e.$headerSub.toggle()}),e.$searchToggle.click(function(){e.$headerSearch.toggle(),e.$searchInput.focus()})},showSinglePostTitle:function(){var e=this;e.headerHeight=$("#header-main-wrapper").height(),e.$headerSinglePostTitle=$("#header-page-title"),e.setSinglePostTitleWidth(),$(window).scroll(function(){$(window).scrollTop()>e.headerHeight?e.$headerSinglePostTitle.css("opacity",1):e.$headerSinglePostTitle.css("opacity",0)}),$(window).resize(function(){e.setSinglePostTitleWidth()})},setSinglePostTitleWidth:function(){var e=this;totalWidth=$(".col18").innerWidth(),navsWidth=$("#header-navs").innerWidth(),e.$headerSinglePostTitle.css("max-width",totalWidth-navsWidth-10+"px")}},Site.Gallery={galleryInstances:[],init:function(){var e=this;$(".swiper-container").length&&e.initSwiperInstances()},initSwiperInstances:function(){var e=this;$(".swiper-container").each(function(i,t){e.galleryInstances[i]=new Swiper(t,{loop:!0,pagination:"#gallery-pagination",paginationType:"fraction",paginationFractionRender:function(e,i,t){return'<span class="'+i+'"></span>/<span class="'+t+'"></span>'},onTap:function(e,i){e.slideNext()}})})}},Site.Search={init:function(){var e=this;$("body").hasClass("error404")&&e.fourzerofour()},fourzerofour:function(){var e=window.location.href,i=e.split("/");""===i[i.length-1]&&i.pop(),i=i[i.length-1],i=i.replace(/-/g," "),i&&$("#search-input").val(i).focus()}},Site.Support={init:function(){var e=this;$(".support-section").length&&e.bind(),e.$progressBar=$("#progress-bar"),e.$progressBar.length&&e.initProgressBar()},bind:function(){$(".support-form-slider").on("input",function(){var e=$(this).closest(".support-form").find(".support-form-value");e.html(this.value)})},initProgressBar:function(){var e=this;e.$progressBar.css("width","0%"),$.get("https://payment.novaramedia.com/api/goal",null,function(i,t){if("success"===t){var n=i.percent;n>1&&(n=1),$("#progress-bar-row").slideDown(1250,function(){e.$progressBar.css("width",100*n+"%"),e.displayProgressText(i)})}},"json")},displayProgressText:function(e){var i=this,t=e.total/e.percent,n=": £"+i.numberWithCommas(e.total)+" of £"+i.numberWithCommas(Math.round(t));$("#progress-text").text(n)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},Site.init();
//# sourceMappingURL=/main.min.js.map