Site={init:function(){var e=this;e.Utilities.init(),e.Header.init(),e.Search.init(),e.Support.init(),e.Analytics.init(),$(document).ready(function(){e.Gallery.init()})}},Site.Utilities={init:function(){var e=this;e.bind(),e.fixWidows(),e.displayTimeSince(),e.checkGDPRApproval()},bind:function(){var e=this;$("#single-resources-section").length&&e.bindResourcesToggle(),$(".js-select").click(function(){$(this).selectText()})},bindResourcesToggle:function(){var e=$("#single-resources-section");$("#js-resources-toggle").click(function(){e.toggle()})},fixWidows:function(){$(".js-fix-widows").each(function(){var e=$(this).html();e=e.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(e)})},displayTimeSince:function(){$(".js-time-since").each(function(){var e=$(this),t=e.data("timestamp"),i=moment(t);i.isAfter(moment().subtract(5,"hours"))&&e.text("| "+i.fromNow())})},checkGDPRApproval:function(){var e=Cookies.get("gdpr-approval");"true"!==e&&($("#gdpr").show(),$("#gdpr-accept").click(function(){Cookies.set("gdpr-approval",!0),$("#gdpr").hide()}))}},Site.Header={init:function(){var e=this;e.$menuToggle=$("#menu-toggle"),e.$headerSub=$("#header-sub"),e.$searchToggle=$("#search-toggle"),e.$headerSearch=$("#header-search"),e.$searchInput=$("#search-input"),e.bind(),$("body").hasClass("single")&&e.showSinglePostTitle()},bind:function(){var e=this;e.$menuToggle.click(function(){e.$headerSub.toggle()}),e.$searchToggle.click(function(){e.$headerSearch.toggle(),e.$searchInput.focus()})},showSinglePostTitle:function(){var e=this;e.headerHeight=$("#header-main-wrapper").height(),e.$headerSinglePostTitle=$("#header-page-title"),e.setSinglePostTitleWidth(),$(window).scroll(function(){$(window).scrollTop()>e.headerHeight?e.$headerSinglePostTitle.css("opacity",1):e.$headerSinglePostTitle.css("opacity",0)}),$(window).resize(function(){e.setSinglePostTitleWidth()})},setSinglePostTitleWidth:function(){var e=this;totalWidth=$(".col18").innerWidth(),navsWidth=$("#header-navs").innerWidth(),e.$headerSinglePostTitle.css("max-width",totalWidth-navsWidth-10+"px")}},Site.Gallery={galleryInstances:[],init:function(){var e=this;$(".swiper-container").length&&e.initSwiperInstances()},initSwiperInstances:function(){var e=this;$(".swiper-container").each(function(t,i){e.galleryInstances[t]=new Swiper(i,{loop:!0,pagination:"#gallery-pagination",paginationType:"fraction",paginationFractionRender:function(e,t,i){return'<span class="'+t+'"></span>/<span class="'+i+'"></span>'},onTap:function(e,t){e.slideNext()}})})}},Site.Search={init:function(){var e=this;$("body").hasClass("error404")&&e.fourzerofour()},fourzerofour:function(){var e=window.location.href,t=e.split("/");""===t[t.length-1]&&t.pop(),t=t[t.length-1],t=t.replace(/-/g," "),t&&$("#search-input").val(t).focus()}},Site.Support={init:function(){var e=this;$(".support-section").length&&e.bind(),e.$progressBar=$("#progress-bar"),e.$progressBar.length&&e.initProgressBar()},bind:function(){$(".support-form-slider").on("input",function(){var e=$(this).closest(".support-form").find(".support-form-value");e.html(this.value)})},initProgressBar:function(){var e=this;e.$progressBar.css("width","0%"),$.get("https://payment.novaramedia.com/api/goal",null,function(t,i){if("success"===i){var n=t.percent;n>1&&(n=1),$("#progress-bar-row").slideDown(1250,function(){e.$progressBar.css("width",100*n+"%"),e.displayProgressText(t)})}},"json")},displayProgressText:function(e){var t=this,i=e.total/e.percent,n=": £"+t.numberWithCommas(e.total)+" of £"+t.numberWithCommas(Math.round(i));$("#progress-text").text(n)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},Site.Analytics={init:function(){var e=this;dataLayer&&e.bind()},bind:function(){var e=this;$(".support-form-slider").on("input",e.debounce(function(){dataLayer.push({event:"sliderChanged",target:$(this).data("target"),amount:this.value})},250)),Site.Header.$menuToggle.click(function(){dataLayer.push({event:"headerToggled"})}),$(".related-posts .post").click(function(){dataLayer.push({event:"relatedPostClicked"})})},debounce:function(e,t,i){var n;return function(){var s=this,r=arguments,o=function(){n=null,i||e.apply(s,r)},a=i&&!n;clearTimeout(n),n=setTimeout(o,t),a&&e.apply(s,r)}}},Site.init();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiU2l0ZSIsImluaXQiLCJfdGhpcyIsInRoaXMiLCJVdGlsaXRpZXMiLCJIZWFkZXIiLCJTZWFyY2giLCJTdXBwb3J0IiwiQW5hbHl0aWNzIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJHYWxsZXJ5IiwiYmluZCIsImZpeFdpZG93cyIsImRpc3BsYXlUaW1lU2luY2UiLCJjaGVja0dEUFJBcHByb3ZhbCIsImxlbmd0aCIsImJpbmRSZXNvdXJjZXNUb2dnbGUiLCJjbGljayIsInNlbGVjdFRleHQiLCIkcmVzb3VyY2VzIiwidG9nZ2xlIiwiZWFjaCIsInN0cmluZyIsImh0bWwiLCJyZXBsYWNlIiwiJGVsZW1lbnQiLCJ0aW1lc3RhbXAiLCJkYXRhIiwibSIsIm1vbWVudCIsImlzQWZ0ZXIiLCJzdWJ0cmFjdCIsInRleHQiLCJmcm9tTm93IiwiYXBwcm92YWxDb29raWUiLCJDb29raWVzIiwiZ2V0Iiwic2hvdyIsInNldCIsImhpZGUiLCIkbWVudVRvZ2dsZSIsIiRoZWFkZXJTdWIiLCIkc2VhcmNoVG9nZ2xlIiwiJGhlYWRlclNlYXJjaCIsIiRzZWFyY2hJbnB1dCIsImhhc0NsYXNzIiwic2hvd1NpbmdsZVBvc3RUaXRsZSIsImZvY3VzIiwiaGVhZGVySGVpZ2h0IiwiaGVpZ2h0IiwiJGhlYWRlclNpbmdsZVBvc3RUaXRsZSIsInNldFNpbmdsZVBvc3RUaXRsZVdpZHRoIiwid2luZG93Iiwic2Nyb2xsIiwic2Nyb2xsVG9wIiwiY3NzIiwicmVzaXplIiwidG90YWxXaWR0aCIsImlubmVyV2lkdGgiLCJuYXZzV2lkdGgiLCJnYWxsZXJ5SW5zdGFuY2VzIiwiaW5pdFN3aXBlckluc3RhbmNlcyIsImluZGV4IiwiaXRlbSIsIlN3aXBlciIsImxvb3AiLCJwYWdpbmF0aW9uIiwicGFnaW5hdGlvblR5cGUiLCJwYWdpbmF0aW9uRnJhY3Rpb25SZW5kZXIiLCJzd2lwZXIiLCJjdXJyZW50Q2xhc3NOYW1lIiwidG90YWxDbGFzc05hbWUiLCJvblRhcCIsImV2ZW50Iiwic2xpZGVOZXh0IiwiZm91cnplcm9mb3VyIiwiaHJlZiIsImxvY2F0aW9uIiwicmVxdWVzdCIsInNwbGl0IiwicG9wIiwidmFsIiwiJHByb2dyZXNzQmFyIiwiaW5pdFByb2dyZXNzQmFyIiwib24iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiZmluZCIsInZhbHVlIiwidGV4dFN0YXR1cyIsInBlcmNlbnQiLCJzbGlkZURvd24iLCJkaXNwbGF5UHJvZ3Jlc3NUZXh0IiwidG90YWwiLCJudW1iZXJXaXRoQ29tbWFzIiwiTWF0aCIsInJvdW5kIiwieCIsInRvU3RyaW5nIiwiZGF0YUxheWVyIiwiZGVib3VuY2UiLCJwdXNoIiwiYW1vdW50IiwiZnVuYyIsIndhaXQiLCJpbW1lZGlhdGUiLCJ0aW1lb3V0IiwiY29udGV4dCIsImFyZ3MiLCJhcmd1bWVudHMiLCJsYXRlciIsImFwcGx5IiwiY2FsbE5vdyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiJBQUdBQSxNQUNFQyxLQUFNLFdBQ0osR0FBSUMsR0FBUUMsSUFFWkQsR0FBTUUsVUFBVUgsT0FDaEJDLEVBQU1HLE9BQU9KLE9BQ2JDLEVBQU1JLE9BQU9MLE9BQ2JDLEVBQU1LLFFBQVFOLE9BQ2RDLEVBQU1NLFVBQVVQLE9BRWhCUSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2hCVCxFQUFNVSxRQUFRWCxXQUtwQkQsS0FBS0ksV0FDSEgsS0FBTSxXQUNKLEdBQUlDLEdBQVFDLElBRVpELEdBQU1XLE9BQ05YLEVBQU1ZLFlBQ05aLEVBQU1hLG1CQUNOYixFQUFNYyxxQkFHUkgsS0FBTSxXQUNKLEdBQUlYLEdBQVFDLElBRVJNLEdBQUUsNkJBQTZCUSxRQUNqQ2YsRUFBTWdCLHNCQUdSVCxFQUFFLGNBQWNVLE1BQU0sV0FDcEJWLEVBQUVOLE1BQU1pQixnQkFLWkYsb0JBQXFCLFdBQ25CLEdBQUlHLEdBQWFaLEVBQUUsNEJBRW5CQSxHQUFFLHdCQUF3QlUsTUFBTSxXQUM5QkUsRUFBV0MsWUFLZlIsVUFB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QU1XLFFBSVZBLEtBQU0sV0FDSixHQUFJWCxHQUFRQyxJQUVaTSxHQUFFLHdCQUF3QjZFLEdBQUcsUUFBU3BGLEVBQU1vRyxTQUFTLFdBQ25ERCxVQUFVRSxNQUNUNUIsTUFBUyxnQkFDVFksT0FBVTlFLEVBQUVOLE1BQU0wQixLQUFLLFVBQ3ZCMkUsT0FBVXJHLEtBQUt1RixTQUVmLE1BRUgxRixLQUFLSyxPQUFPcUMsWUFBWXZCLE1BQU0sV0FDNUJrRixVQUFVRSxNQUNUNUIsTUFBUyxvQkFJWmxFLEVBQUUsd0JBQXdCVSxNQUFNLFdBQzlCa0YsVUFBVUUsTUFDVDVCLE1BQVMsMEJBTWQyQixTQUFVLFNBQVNHLEVBQU1DLEVBQU1DLEdBQzlCLEdBQUlDLEVBQ0osT0FBTyxZQUNOLEdBQUlDLEdBQVUxRyxLQUFNMkcsRUFBT0MsVUFDdkJDLEVBQVEsV0FDWEosRUFBVSxLQUNMRCxHQUFXRixFQUFLUSxNQUFNSixFQUFTQyxJQUVqQ0ksRUFBVVAsSUFBY0MsQ0FDNUJPLGNBQWFQLEdBQ2JBLEVBQVVRLFdBQVdKLEVBQU9OLEdBQ3hCUSxHQUFTVCxFQUFLUSxNQUFNSixFQUFTQyxNQUtyQzlHLEtBQUtDIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoganNoaW50IGJyb3dzZXI6IHRydWUsIGRldmVsOiB0cnVlLCBpbmRlbnQ6IDIsIGN1cmx5OiB0cnVlLCBlcWVxZXE6IHRydWUsIGZ1dHVyZWhvc3RpbGU6IHRydWUsIGxhdGVkZWY6IHRydWUsIHVuZGVmOiB0cnVlLCB1bnVzZWQ6IHRydWUgKi9cbi8qIGdsb2JhbCAkLCBTaXRlLCBDb29raWVzLCBkYXRhTGF5ZXIsIFN3aXBlciwgbW9tZW50ICovXG5cblNpdGUgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfdGhpcy5VdGlsaXRpZXMuaW5pdCgpO1xuICAgIF90aGlzLkhlYWRlci5pbml0KCk7XG4gICAgX3RoaXMuU2VhcmNoLmluaXQoKTtcbiAgICBfdGhpcy5TdXBwb3J0LmluaXQoKTtcbiAgICBfdGhpcy5BbmFseXRpY3MuaW5pdCgpO1xuXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy5HYWxsZXJ5LmluaXQoKTtcbiAgICB9KTtcbiAgfVxufTtcblxuU2l0ZS5VdGlsaXRpZXMgPSB7XG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBfdGhpcy5iaW5kKCk7XG4gICAgX3RoaXMuZml4V2lkb3dzKCk7XG4gICAgX3RoaXMuZGlzcGxheVRpbWVTaW5jZSgpO1xuICAgIF90aGlzLmNoZWNrR0RQUkFwcHJvdmFsKCk7XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICgkKCcjc2luZ2xlLXJlc291cmNlcy1zZWN0aW9uJykubGVuZ3RoKSB7XG4gICAgICBfdGhpcy5iaW5kUmVzb3VyY2VzVG9nZ2xlKCk7XG4gICAgfVxuXG4gICAgJCgnLmpzLXNlbGVjdCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgJCh0aGlzKS5zZWxlY3RUZXh0KCk7XG4gICAgfSk7XG5cbiAgfSxcblxuICBiaW5kUmVzb3VyY2VzVG9nZ2xlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgJHJlc291cmNlcyA9ICQoJyNzaW5nbGUtcmVzb3VyY2VzLXNlY3Rpb24nKTtcblxuICAgICQoJyNqcy1yZXNvdXJjZXMtdG9nZ2xlJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAkcmVzb3VyY2VzLnRvZ2dsZSgpO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgZml4V2lkb3dzOiBmdW5jdGlvbigpIHtcbiAgICAvLyB1dGlsaXR5IGNsYXNzIG1haW5seSBmb3IgdXNlIG9uIGhlYWRpbmVzIHRvIGF2b2lkIHdpZG93cyBbc2luZ2xlIHdvcmRzIG9uIGEgbmV3IGxpbmVdXG4gICAgJCgnLmpzLWZpeC13aWRvd3MnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgc3RyaW5nID0gJCh0aGlzKS5odG1sKCk7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcucmVwbGFjZSgvIChbXiBdKikkLywnJm5ic3A7JDEnKTtcbiAgICAgICQodGhpcykuaHRtbChzdHJpbmcpO1xuICAgIH0pO1xuICB9LFxuXG4gIGRpc3BsYXlUaW1lU2luY2U6IGZ1bmN0aW9uKCkge1xuICAgICQoJy5qcy10aW1lLXNpbmNlJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgIHZhciAkZWxlbWVudCA9ICQodGhpcyk7XG4gICAgICB2YXIgdGltZXN0YW1wID0gJGVsZW1lbnQuZGF0YSgndGltZXN0YW1wJyk7XG4gICAgICB2YXIgbSA9IG1vbWVudCh0aW1lc3RhbXApO1xuXG4gICAgICBpZiAobS5pc0FmdGVyKG1vbWVudCgpLnN1YnRyYWN0KDUsICdob3VycycpKSkge1xuICAgICAgICAkZWxlbWVudC50ZXh0KCd8ICcgKyBtLmZyb21Ob3coKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0sXG5cbiAgY2hlY2tHRFBSQXBwcm92YWw6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcHByb3ZhbENvb2tpZSA9IENvb2tpZXMuZ2V0KCdnZHByLWFwcHJvdmFsJyk7XG5cbiAgICBpZiAoYXBwcm92YWxDb29raWUgIT09ICd0cnVlJykge1xuICAgICAgJCgnI2dkcHInKS5zaG93KCk7XG5cbiAgICAgICQoJyNnZHByLWFjY2VwdCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICBDb29raWVzLnNldCgnZ2Rwci1hcHByb3ZhbCcsIHRydWUpO1xuICAgICAgICAkKCcjZ2RwcicpLmhpZGUoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG59O1xuXG5TaXRlLkhlYWRlciA9IHtcbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLiRtZW51VG9nZ2xlID0gJCgnI21lbnUtdG9nZ2xlJyk7XG4gICAgX3RoaXMuJGhlYWRlclN1YiA9ICQoJyNoZWFkZXItc3ViJyk7XG4gICAgX3RoaXMuJHNlYXJjaFRvZ2dsZSA9ICQoJyNzZWFyY2gtdG9nZ2xlJyk7XG4gICAgX3RoaXMuJGhlYWRlclNlYXJjaCA9ICQoJyNoZWFkZXItc2VhcmNoJyk7XG4gICAgX3RoaXMuJHNlYXJjaElucHV0ID0gJCgnI3NlYXJjaC1pbnB1dCcpO1xuXG4gICAgX3RoaXMuYmluZCgpO1xuXG4gICAgaWYgKCQoJ2JvZHknKS5oYXNDbGFzcygnc2luZ2xlJykpIHtcbiAgICAgIF90aGlzLnNob3dTaW5nbGVQb3N0VGl0bGUoKTtcbiAgICB9XG5cbiAgfSxcblxuICBiaW5kOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuJG1lbnVUb2dnbGUuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy4kaGVhZGVyU3ViLnRvZ2dsZSgpO1xuICAgIH0pO1xuXG4gICAgX3RoaXMuJHNlYXJjaFRvZ2dsZS5jbGljayhmdW5jdGlvbigpIHtcbiAgICAgIF90aGlzLiRoZWFkZXJTZWFyY2gudG9nZ2xlKCk7XG4gICAgICAgX3RoaXMuJHNlYXJjaElucHV0LmZvY3VzKCk7XG4gICAgfSk7XG5cbiAgfSxcblxuICBzaG93U2luZ2xlUG9zdFRpdGxlOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgX3RoaXMuaGVhZGVySGVpZ2h0ID0gJCgnI2hlYWRlci1tYWluLXdyYXBwZXInKS5oZWlnaHQoKTtcbiAgICBfdGhpcy4kaGVhZGVyU2luZ2xlUG9zdFRpdGxlID0gJCgnI2hlYWRlci1wYWdlLXRpdGxlJyk7XG5cbiAgICBfdGhpcy5zZXRTaW5nbGVQb3N0VGl0bGVXaWR0aCgpO1xuXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHtcbiAgICAgIGlmICgkKHdpbmRvdykuc2Nyb2xsVG9wKCkgPiBfdGhpcy5oZWFkZXJIZWlnaHQpIHtcblxuICAgICAgICBfdGhpcy4kaGVhZGVyU2luZ2xlUG9zdFRpdGxlLmNzcygnb3BhY2l0eScsIDEpO1xuXG4gICAgICB9IGVsc2Uge1xuXG4gICAgICAgIF90aGlzLiRoZWFkZXJTaW5nbGVQb3N0VGl0bGUuY3NzKCdvcGFjaXR5JywgMCk7XG5cbiAgICAgIH1cbiAgICB9KTtcblxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKSB7XG4gICAgICBfdGhpcy5zZXRTaW5nbGVQb3N0VGl0bGVXaWR0aCgpO1xuICAgIH0pO1xuXG4gIH0sXG5cbiAgc2V0U2luZ2xlUG9zdFRpdGxlV2lkdGg6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB0b3RhbFdpZHRoID0gJCgnLmNvbDE4JykuaW5uZXJXaWR0aCgpO1xuICAgIG5hdnNXaWR0aCA9ICQoJyNoZWFkZXItbmF2cycpLmlubmVyV2lkdGgoKTtcblxuICAgIF90aGlzLiRoZWFkZXJTaW5nbGVQb3N0VGl0bGUuY3NzKCdtYXgtd2lkdGgnLCAodG90YWxXaWR0aCAtIG5hdnNXaWR0aCAtIDEwKSArICdweCcpO1xuICB9XG59O1xuXG5TaXRlLkdhbGxlcnkgPSB7XG4gIGdhbGxlcnlJbnN0YW5jZXM6IFtdLFxuXG4gIGluaXQ6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBpZiAoJCgnLnN3aXBlci1jb250YWluZXInKS5sZW5ndGgpIHtcbiAgICAgIF90aGlzLmluaXRTd2lwZXJJbnN0YW5jZXMoKTtcbiAgICB9XG4gIH0sXG5cbiAgaW5pdFN3aXBlckluc3RhbmNlczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICQoJy5zd2lwZXItY29udGFpbmVyJykuZWFjaChmdW5jdGlvbihpbmRleCwgaXRlbSkge1xuXG4gICAgICBfdGhpcy5nYWxsZXJ5SW5zdGFuY2VzW2luZGV4XSA9IG5ldyBTd2lwZXIoaXRlbSwge1xuICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICBwYWdpbmF0aW9uOiAnI2dhbGxlcnktcGFnaW5hdGlvbicsXG4gICAgICAgIHBhZ2luYXRpb25UeXBlOiAnZnJhY3Rpb24nLFxuICAgICAgICBwYWdpbmF0aW9uRnJhY3Rpb25SZW5kZXI6IGZ1bmN0aW9uIChzd2lwZXIsIGN1cnJlbnRDbGFzc05hbWUsIHRvdGFsQ2xhc3NOYW1lKSB7XG4gICAgICAgICAgcmV0dXJuICc8c3BhbiBjbGFzcz1cIicgKyBjdXJyZW50Q2xhc3NOYW1lICsgJ1wiPjwvc3Bhbj4vPHNwYW4gY2xhc3M9XCInICsgdG90YWxDbGFzc05hbWUgKyAnXCI+PC9zcGFuPic7XG4gICAgICAgIH0sXG4gICAgICAgIG9uVGFwOiBmdW5jdGlvbihzd2lwZXIsIGV2ZW50KSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlTmV4dCgpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cblNpdGUuU2VhcmNoID0ge1xuICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ2Vycm9yNDA0JykpIHtcbiAgICAgIF90aGlzLmZvdXJ6ZXJvZm91cigpO1xuICAgIH1cblxuICB9LFxuXG4gIGZvdXJ6ZXJvZm91cjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAvLyByZW1vdmUgdXJsIGJlZm9yZSBXUFxuICAgIHZhciByZXF1ZXN0ID0gaHJlZi5zcGxpdCgnLycpO1xuICAgIC8vIGdldCBsYXN0IHBhcnQgb2YgdXJsXG5cbiAgICAvLyBJZiB0cmFpbGluZyAvXG4gICAgaWYoIHJlcXVlc3RbcmVxdWVzdC5sZW5ndGggLSAxXSA9PT0gXCJcIiApIHtcbiAgICAgIC8vIFJlbW92ZSBsYXN0IGVsZW1lbnQgZnJvbSB0aGUgYXJyYXlcbiAgICAgIHJlcXVlc3QucG9wKCk7XG4gICAgfVxuXG4gICAgcmVxdWVzdCA9IHJlcXVlc3RbcmVxdWVzdC5sZW5ndGgtMV07XG4gICAgLy8gcmVtb3ZlIGFueSBkYXNoZXMgW2luIHRoZSBjYXNlIG9mIGEgcmVhbCBwZXJtYWxpbmsgc2x1Z11cbiAgICByZXF1ZXN0ID0gcmVxdWVzdC5yZXBsYWNlKC8tL2csICcgJyk7XG5cbiAgICBpZiAocmVxdWVzdCkge1xuICAgICAgJCgnI3NlYXJjaC1pbnB1dCcpLnZhbChyZXF1ZXN0KS5mb2N1cygpO1xuICAgIH1cbiAgfSxcbn07XG5cblNpdGUuU3VwcG9ydCA9IHtcbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmICgkKCcuc3VwcG9ydC1zZWN0aW9uJykubGVuZ3RoKSB7XG4gICAgICBfdGhpcy5iaW5kKCk7XG4gICAgfVxuXG4gICAgX3RoaXMuJHByb2dyZXNzQmFyID0gJCgnI3Byb2dyZXNzLWJhcicpO1xuXG4gICAgaWYgKF90aGlzLiRwcm9ncmVzc0Jhci5sZW5ndGgpIHtcbiAgICAgIF90aGlzLmluaXRQcm9ncmVzc0JhcigpO1xuICAgIH1cbiAgfSxcblxuICBiaW5kOiBmdW5jdGlvbigpIHtcbiAgICAkKCcuc3VwcG9ydC1mb3JtLXNsaWRlcicpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIHRhcmdldCA9ICQodGhpcykuY2xvc2VzdCgnLnN1cHBvcnQtZm9ybScpLmZpbmQoJy5zdXBwb3J0LWZvcm0tdmFsdWUnKTtcbiAgICAgIHRhcmdldC5odG1sKHRoaXMudmFsdWUpO1xuICAgIH0pO1xuICB9LFxuXG4gIGluaXRQcm9ncmVzc0JhcjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIF90aGlzLiRwcm9ncmVzc0Jhci5jc3MoJ3dpZHRoJywgJzAlJyk7XG5cbiAgICAkLmdldCgnaHR0cHM6Ly9wYXltZW50Lm5vdmFyYW1lZGlhLmNvbS9hcGkvZ29hbCcsIG51bGwsIGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMpIHtcblxuICAgICAgaWYgKHRleHRTdGF0dXMgPT09ICdzdWNjZXNzJykge1xuICAgICAgICB2YXIgcGVyY2VudCA9IGRhdGEucGVyY2VudDtcblxuICAgICAgICBpZiAocGVyY2VudCA+IDEpIHtcbiAgICAgICAgICBwZXJjZW50ID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJyNwcm9ncmVzcy1iYXItcm93Jykuc2xpZGVEb3duKDEyNTAsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIF90aGlzLiRwcm9ncmVzc0Jhci5jc3MoJ3dpZHRoJywgKHBlcmNlbnQgKiAxMDApICsgJyUnKTtcblxuICAgICAgICAgIF90aGlzLmRpc3BsYXlQcm9ncmVzc1RleHQoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgfSwgJ2pzb24nKTtcbiAgfSxcblxuICBkaXNwbGF5UHJvZ3Jlc3NUZXh0OiBmdW5jdGlvbihkYXRhKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciB0b3RhbCA9IGRhdGEudG90YWwgLyBkYXRhLnBlcmNlbnQ7XG4gICAgdmFyIHRleHQgPSAnOiDCoycgKyBfdGhpcy5udW1iZXJXaXRoQ29tbWFzKGRhdGEudG90YWwpICsgJyBvZiDCoycgKyBfdGhpcy5udW1iZXJXaXRoQ29tbWFzKE1hdGgucm91bmQodG90YWwpKTtcblxuICAgICQoJyNwcm9ncmVzcy10ZXh0JykudGV4dCh0ZXh0KTtcbiAgfSxcblxuICBudW1iZXJXaXRoQ29tbWFzOiBmdW5jdGlvbih4KSB7XG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjkwMTEwMi9ob3ctdG8tcHJpbnQtYS1udW1iZXItd2l0aC1jb21tYXMtYXMtdGhvdXNhbmRzLXNlcGFyYXRvcnMtaW4tamF2YXNjcmlwdCMyOTAxMjk4XG4gICAgcmV0dXJuIHgudG9TdHJpbmcoKS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIixcIik7XG4gIH0sXG59O1xuXG5TaXRlLkFuYWx5dGljcyA9IHtcbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGlmIChkYXRhTGF5ZXIpIHtcbiAgICAgIF90aGlzLmJpbmQoKTtcbiAgICB9XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICQoJy5zdXBwb3J0LWZvcm0tc2xpZGVyJykub24oJ2lucHV0JywgX3RoaXMuZGVib3VuY2UoZnVuY3Rpb24oKSB7XG4gICAgICBkYXRhTGF5ZXIucHVzaCh7XG4gICAgICAgJ2V2ZW50JzogJ3NsaWRlckNoYW5nZWQnLFxuICAgICAgICd0YXJnZXQnOiAkKHRoaXMpLmRhdGEoJ3RhcmdldCcpLFxuICAgICAgICdhbW91bnQnOiB0aGlzLnZhbHVlLFxuICAgICAgfSk7XG4gICAgfSwgMjUwKSk7XG5cbiAgICBTaXRlLkhlYWRlci4kbWVudVRvZ2dsZS5jbGljayhmdW5jdGlvbigpIHsgLy8gYmluZCBoYW1idXJnZXIgY2xpY2tcbiAgICAgIGRhdGFMYXllci5wdXNoKHtcbiAgICAgICAnZXZlbnQnOiAnaGVhZGVyVG9nZ2xlZCdcbiAgICAgICB9KTtcbiAgICB9KTtcblxuICAgICQoJy5yZWxhdGVkLXBvc3RzIC5wb3N0JykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICBkYXRhTGF5ZXIucHVzaCh7XG4gICAgICAgJ2V2ZW50JzogJ3JlbGF0ZWRQb3N0Q2xpY2tlZCdcbiAgICAgICB9KTtcbiAgICB9KTtcblxuICB9LFxuXG4gIGRlYm91bmNlOiBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgXHR2YXIgdGltZW91dDtcbiAgXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG4gIFx0XHR2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XG4gIFx0XHR2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgXHRcdFx0dGltZW91dCA9IG51bGw7XG4gIFx0XHRcdGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICBcdFx0fTtcbiAgXHRcdHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICBcdFx0Y2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICBcdFx0dGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICBcdFx0aWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gIFx0fTtcbiAgfSxcbn07XG5cblNpdGUuaW5pdCgpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==