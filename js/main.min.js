Site={init:function(){var e=this;e.Utilities.init(),e.Header.init(),e.Search.init(),e.Support.init(),e.RadioPlayer.init(),$(document).ready(function(){e.Gallery.init()})}},Site.Utilities={init:function(){var e=this;e.bind(),e.fixWidows(),e.displayTimeSince(),e.checkGDPRApproval()},bind:function(){var e=this;$("#single-resources-section").length&&e.bindResourcesToggle(),$(".js-select").click(function(){$(this).selectText()})},bindResourcesToggle:function(){var e=$("#single-resources-section");$("#js-resources-toggle").click(function(){e.toggle()})},fixWidows:function(){$(".js-fix-widows").each(function(){var e=$(this).html();e=e.replace(/ ([^ ]*)$/,"&nbsp;$1"),$(this).html(e)})},displayTimeSince:function(){$(".js-time-since").each(function(){var e=$(this),t=e.data("timestamp"),i=moment(t);i.isAfter(moment().subtract(5,"hours"))&&e.text("| "+i.fromNow())})},checkGDPRApproval:function(){var e=Cookies.get("gdpr-approval");"true"!==e&&($("#gdpr").show(),$("#gdpr-accept").click(function(){Cookies.set("gdpr-approval",!0),$("#gdpr").hide()}))}},Site.Header={init:function(){var e=this;e.$menuToggle=$("#menu-toggle"),e.$headerSub=$("#header-sub"),e.$searchToggle=$("#search-toggle"),e.$headerSearch=$("#header-search"),e.$searchInput=$("#search-input"),e.bind(),$("body").hasClass("single")&&e.showSinglePostTitle()},bind:function(){var e=this;e.$menuToggle.click(function(){e.$headerSub.toggle()}),e.$searchToggle.click(function(){e.$headerSearch.toggle(),e.$searchInput.focus()})},showSinglePostTitle:function(){var e=this;e.headerHeight=$("#header-main-wrapper").height(),e.$headerSinglePostTitle=$("#header-page-title"),$(window).scroll(function(){$(window).scrollTop()>e.headerHeight?e.$headerSinglePostTitle.css("opacity",1):e.$headerSinglePostTitle.css("opacity",0)})}},Site.Gallery={galleryInstances:[],init:function(){var e=this;$(".swiper-container").length&&e.initSwiperInstances()},initSwiperInstances:function(){var e=this;$(".swiper-container").each(function(t,i){e.galleryInstances[t]=new Swiper(i,{loop:!0,pagination:"#gallery-pagination",paginationType:"fraction",paginationFractionRender:function(e,t,i){return'<span class="'+t+'"></span>/<span class="'+i+'"></span>'},onTap:function(e,t){e.slideNext()}})})}},Site.Search={init:function(){var e=this;e.form=$("#search-input"),e.tags=$(".suggested-tag"),e.tagsList=$("#tag-suggestions"),e.bind(),$("body").hasClass("error404")&&e.fourzerofour()},bind:function(){var e=this;e.form.on("change keyup input paste",$.debounce(500,function(){var t=e.slugify($(this).val()),i=e.tags.siblings('[data-tag*="'+t+'"]');e.tags.hide(),0!==i.length?(i.show(),e.tagsList.show()):e.tagsList.hide()}))},slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},fourzerofour:function(){var e=window.location.href,t=e.split("/");""===t[t.length-1]&&t.pop(),t=t[t.length-1],t=t.replace(/-/g," "),t&&$("#search-input").val(t).focus()}},Site.Support={init:function(){var e=this;$(".support-section").length&&e.bind(),e.$progressBar=$("#progress-bar"),e.$progressBar&&e.initProgressBar()},bind:function(){$(".support-form-slider").on("input",function(){var e=$(this).closest(".support-form").find(".support-form-value");e.html(this.value)})},initProgressBar:function(){var e=this;e.$progressBar.css("width","0%"),$.get("https://payment.novaramedia.com/api/goal",null,function(t,i){if("success"===i){var n=t.percent;n>1&&(n=1),$("#progress-bar-row").slideDown(1250,function(){e.$progressBar.css("width",100*n+"%"),e.displayProgressText(t)})}},"json")},displayProgressText:function(e){var t=this,i=e.total/e.percent,n=": £"+t.numberWithCommas(e.total)+" of £"+t.numberWithCommas(Math.round(i));$("#progress-text").text(n)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}},Site.RadioPlayer={$radioPlayer:$("#radio-player"),playerIsInitialized:!1,init:function(){var e=this;e.isBST=e.checkBST(),$("body").hasClass("home")&&(e.isSchedule()&&e.goLive(),setInterval(function(){e.isSchedule()?e.goLive():e.goOffline()},15e3))},goLive:function(){var e=this;e.playerIsInitialized||e.initPlayer(),e.$radioPlayer.show()},goOffline:function(){var e=this;e.playerIsInitialized&&e.$jPlayer.jPlayer("stop"),e.$radioPlayer.hide()},initPlayer:function(){var e=this;e.$jPlayer=$("#jplayer").jPlayer({ready:function(){$(this).jPlayer("setMedia",{title:"resonancefm",mp3:"http://54.77.136.103:8000/resonance"})},cssSelectorAncestor:"#jp_container_1",swfPath:"/js",supplied:"mp3",useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,keyEnabled:!0}).bind($.jPlayer.event.play,function(){$(".jp-play").hide(),$(".jp-stop").show()}).bind($.jPlayer.event.pause,function(){$(".jp-stop").hide(),$(".jp-play").show()}),e.playerIsInitialized=!0},isSchedule:function(){var e,t=this,i=new Date;e=t.isBST?new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours()+1,i.getUTCMinutes(),i.getUTCSeconds()):new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());var n=e.getDay(),a=e.getHours(),r=e.getMinutes(),s=60*a+r;return 1===n&&s>418&&s<482||5===n&&s>778&&s<842},checkBST:function(){for(var e,t,i=new Date,n=31;n>0;n--){var a=new Date(i.getFullYear(),2,n);if(0===a.getDay()){e=a;break}}for(var r=31;r>0;r--){var s=new Date(i.getFullYear(),9,r);if(0===s.getDay()){t=s;break}}return!(i<e||i>t)}},Site.init();
//# sourceMappingURL=/main.min.js.map